digraph AWS_Architecture {
	User [label="User (Initiates Request)"]
	Cloudflare [label="Cloudflare (DNS, Security Rules)"]
	FilterRequest [label="Filter Request (Apply Security Policies)"]
	Browser [label="Browser (Manages Tokens, Sends Requests)"]
	AuthenticateUser [label="Authenticate User (Validate Credentials, Return Auth Token)"]
	Cognito [label="AWS Cognito (Auth & Token Issuance)"]
	SaaSGateway [label="SaaS Gateway (Request Router)"]
	DetermineRole [label="Determine Role (Resolve Tenant and Role)"]
	SecurityMicroservice [label="Security Microservice (User Validation, Role Resolution, JWT Issuance)"]
	GenerateJWT [label="Generate JWT (Validate and Issue Token)"]
	OrderBahnPlatform [label="OrderBahn Platform (Role-Based Access, App Modules)"]
	EvaluatePermissions [label="Evaluate Permissions (Determine Accessible Modules)"]
	InteractRecords [label="Interact with Records (View/Edit/Create/Delete)"]
	RecordGrid [label="Record Grid (Tracker Records Display)"]
	OpenRecord [label="Open Record (View PDF)"]
	EditRecord [label="Edit Record (Validate Permissions, Log Changes)"]
	LogChanges [label="Log Changes (Store Modifications in Audit Trail)"]
	AuditTrail [label="Audit Trail (Logs Changes)"]
	Microservices [label="Microservices (Secure VPN)"]
	User -> Cloudflare [label="Access OrderBahn.com"]
	Cloudflare -> FilterRequest [label="Apply Security Rules"]
	FilterRequest -> Browser [label="Request Allowed"]
	Browser -> AuthenticateUser [label="Send Credentials"]
	AuthenticateUser -> Cognito [label="Validate User"]
	Cognito -> AuthenticateUser [label="Return Auth Token"]
	Browser -> SaaSGateway [label="Send Auth Token"]
	SaaSGateway -> DetermineRole [label="Forward to Security Service"]
	DetermineRole -> SecurityMicroservice [label="Resolve Tenant & Role"]
	SecurityMicroservice -> GenerateJWT [label="Validate User & Issue JWT"]
	GenerateJWT -> SaaSGateway [label="Return JWT"]
	SaaSGateway -> Browser [label="Send JWT to User"]
	Browser -> OrderBahnPlatform [label="Access Modules"]
	OrderBahnPlatform -> EvaluatePermissions [label="Determine Module Access"]
	EvaluatePermissions -> Browser [label="Return Accessible Modules"]
	Browser -> InteractRecords [label="Access Tracker Records"]
	InteractRecords -> RecordGrid [label="View/Edit/Create/Delete"]
	RecordGrid -> OpenRecord [label="Open Record (View PDF)"]
	RecordGrid -> EditRecord [label="Edit Metadata"]
	EditRecord -> OrderBahnPlatform [label="Validate Permissions"]
	EditRecord -> LogChanges [label="Log Edit to Audit Trail"]
	LogChanges -> AuditTrail [label="Store Change Logs"]
	Browser -> SaaSGateway [label="Secure Communication with Services"]
	SaaSGateway -> Microservices [label="Route to Microservices"]
}
