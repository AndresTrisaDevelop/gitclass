digraph AWS_Architecture_with_Icons {
	User [label="User (Initiates Request)" image="path_to_icons/user_icon.png" shape=none]
	Cloudflare [label="Cloudflare (DNS, Security Rules)" image="path_to_icons/cloudflare_icon.png" shape=none]
	FilterRequest [label="Filter Request (Apply Security Policies)" image="path_to_icons/filter_request_icon.png" shape=none]
	Browser [label="Browser (Manages Tokens, Sends Requests)" image="path_to_icons/browser_icon.png" shape=none]
	AuthenticateUser [label="Authenticate User (Validate Credentials, Return Auth Token)" image="path_to_icons/authenticate_user_icon.png" shape=none]
	Cognito [label="AWS Cognito (Auth & Token Issuance)" image="path_to_icons/cognito_icon.png" shape=none]
	SaaSGateway [label="SaaS Gateway (Request Router)" image="path_to_icons/saas_gateway_icon.png" shape=none]
	DetermineRole [label="Determine Role (Resolve Tenant and Role)" image="path_to_icons/determine_role_icon.png" shape=none]
	SecurityMicroservice [label="Security Microservice (User Validation, Role Resolution, JWT Issuance)" image="path_to_icons/security_microservice_icon.png" shape=none]
	GenerateJWT [label="Generate JWT (Validate and Issue Token)" image="path_to_icons/generate_jwt_icon.png" shape=none]
	OrderBahnPlatform [label="OrderBahn Platform (Role-Based Access, App Modules)" image="path_to_icons/orderbahn_platform_icon.png" shape=none]
	EvaluatePermissions [label="Evaluate Permissions (Determine Accessible Modules)" image="path_to_icons/evaluate_permissions_icon.png" shape=none]
	InteractRecords [label="Interact with Records (View/Edit/Create/Delete)" image="path_to_icons/interact_records_icon.png" shape=none]
	RecordGrid [label="Record Grid (Tracker Records Display)" image="path_to_icons/record_grid_icon.png" shape=none]
	OpenRecord [label="Open Record (View PDF)" image="path_to_icons/open_record_icon.png" shape=none]
	EditRecord [label="Edit Record (Validate Permissions, Log Changes)" image="path_to_icons/edit_record_icon.png" shape=none]
	LogChanges [label="Log Changes (Store Modifications in Audit Trail)" image="path_to_icons/log_changes_icon.png" shape=none]
	AuditTrail [label="Audit Trail (Logs Changes)" image="path_to_icons/audit_trail_icon.png" shape=none]
	Microservices [label="Microservices (Secure VPN)" image="path_to_icons/microservices_icon.png" shape=none]
	User -> Cloudflare [label="Access OrderBahn.com"]
	Cloudflare -> FilterRequest [label="Apply Security Rules"]
	FilterRequest -> Browser [label="Request Allowed"]
	Browser -> AuthenticateUser [label="Send Credentials"]
	AuthenticateUser -> Cognito [label="Validate User"]
	Cognito -> AuthenticateUser [label="Return Auth Token"]
	Browser -> SaaSGateway [label="Send Auth Token"]
	SaaSGateway -> DetermineRole [label="Forward to Security Service"]
	DetermineRole -> SecurityMicroservice [label="Resolve Tenant & Role"]
	SecurityMicroservice -> GenerateJWT [label="Validate User & Issue JWT"]
	GenerateJWT -> SaaSGateway [label="Return JWT"]
	SaaSGateway -> Browser [label="Send JWT to User"]
	Browser -> OrderBahnPlatform [label="Access Modules"]
	OrderBahnPlatform -> EvaluatePermissions [label="Determine Module Access"]
	EvaluatePermissions -> Browser [label="Return Accessible Modules"]
	Browser -> InteractRecords [label="Access Tracker Records"]
	InteractRecords -> RecordGrid [label="View/Edit/Create/Delete"]
	RecordGrid -> OpenRecord [label="Open Record (View PDF)"]
	RecordGrid -> EditRecord [label="Edit Metadata"]
	EditRecord -> OrderBahnPlatform [label="Validate Permissions"]
	EditRecord -> LogChanges [label="Log Edit to Audit Trail"]
	LogChanges -> AuditTrail [label="Store Change Logs"]
	Browser -> SaaSGateway [label="Secure Communication with Services"]
	SaaSGateway -> Microservices [label="Route to Microservices"]
}
